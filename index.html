<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>6Q Prompt Builder for CAs ‚Äì Bright UI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg1: #020617;
      --bg2: #0f172a;
      --bg3: #1e293b;
      --text: #f9fafb;
      --muted: #e5e7eb;
      --danger: #fb7185;

      --accent-green: #22c55e;
      --accent-blue: #38bdf8;
      --accent-purple: #a855f7;
      --accent-amber: #facc15;
      --accent-pink: #fb7185;
      --accent-teal: #14b8a6;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      color: var(--text);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.22), transparent 60%),
        radial-gradient(circle at top right, rgba(244, 114, 182, 0.22), transparent 60%),
        radial-gradient(circle at bottom, rgba(52, 211, 153, 0.25), transparent 60%),
        linear-gradient(135deg, #022c22, #0f172a, #1e3a8a);
      display: flex;
      justify-content: center;
      padding: 20px;
    }

    .app-wrapper {
      width: 100%;
      max-width: 1240px;
    }

    /* Animated top bar */
    .top-strip {
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        #22c55e,
        #38bdf8,
        #a855f7,
        #f97316,
        #facc15,
        #fb7185,
        #22c55e
      );
      background-size: 400% 100%;
      animation: stripMove 14s linear infinite;
      margin-bottom: 16px;
      box-shadow: 0 0 28px rgba(251, 191, 36, 0.9);
    }

    @keyframes stripMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 18px;
      margin-bottom: 18px;
    }

    .title-block h1 {
      margin: 6px 0 8px;
      font-size: 2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .highlight {
      color: var(--accent-amber);
      text-shadow: 0 0 12px rgba(250, 204, 21, 0.9);
    }

    .logo-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(52, 211, 153, 0.4), rgba(15, 23, 42, 0.95));
      border: 1px solid rgba(74, 222, 128, 0.8);
      font-size: 0.85rem;
      box-shadow: 0 10px 26px rgba(34, 197, 94, 0.7);
    }

    .logo-chip span.icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #22c55e, #16a34a);
      color: #022c22;
      font-size: 0.9rem;
    }

    .logo-chip span.text {
      font-weight: 600;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .badge-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .badge {
      font-size: 0.75rem;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(191, 219, 254, 0.9);
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.9),
        rgba(129, 140, 248, 0.9)
      );
      color: #eff6ff;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.7);
    }

    .badge.pink {
      background: linear-gradient(
        135deg,
        rgba(236, 72, 153, 0.95),
        rgba(244, 114, 182, 0.95)
      );
      box-shadow: 0 10px 25px rgba(236, 72, 153, 0.75);
    }

    .badge.green {
      background: linear-gradient(
        135deg,
        rgba(34, 197, 94, 0.95),
        rgba(52, 211, 153, 0.95)
      );
      box-shadow: 0 10px 25px rgba(34, 197, 94, 0.75);
    }

    .badge .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #facc15;
    }

    .header-actions {
      text-align: right;
      font-size: 0.82rem;
      color: var(--muted);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .header-tag {
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(191, 219, 254, 0.9);
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.95),
        rgba(129, 140, 248, 0.95)
      );
      color: #eff6ff;
      font-size: 0.78rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 12px 28px rgba(37, 99, 235, 0.7);
    }

    .header-tag span.icon {
      font-size: 0.9rem;
    }

    .hint {
      font-size: 0.78rem;
      color: var(--muted);
      opacity: 0.95;
    }

    /* Step strip */
    .step-strip {
      margin-top: 6px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .step-chip {
      font-size: 0.72rem;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .step-chip span.circle {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.68rem;
      color: #e0f2fe;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 2fr 1.1fr;
      gap: 18px;
    }

    @media (max-width: 960px) {
      body {
        padding: 12px;
      }
      .main-grid {
        grid-template-columns: 1fr;
      }
      .app-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .header-actions {
        text-align: left;
      }
    }

    .card {
      border-radius: 20px;
      padding: 16px 16px 18px;
      border: 2px solid rgba(224, 231, 255, 0.7);
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.3), transparent 55%),
        radial-gradient(circle at bottom right, rgba(45, 212, 191, 0.3), transparent 55%),
        linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      box-shadow:
        0 22px 45px rgba(15, 23, 42, 0.9),
        0 0 40px rgba(96, 165, 250, 0.4);
      backdrop-filter: blur(16px);
    }

    .qualities-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    @media (max-width: 768px) {
      .qualities-grid {
        grid-template-columns: 1fr;
      }
    }

    .quality-card {
      border-radius: 14px;
      padding: 10px 11px 11px;
      position: relative;
      overflow: hidden;
      color: #f9fafb;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.9);
    }

    .quality-1 {
      background: linear-gradient(135deg, #22c55e, #4ade80);
    }
    .quality-2 {
      background: linear-gradient(135deg, #0ea5e9, #38bdf8);
    }
    .quality-3 {
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
    }
    .quality-4 {
      background: linear-gradient(135deg, #f97316, #facc15);
    }
    .quality-5 {
      background: linear-gradient(135deg, #ec4899, #fb7185);
    }
    .quality-6 {
      background: linear-gradient(135deg, #14b8a6, #22c55e);
    }

    .quality-card::before {
      content: "";
      position: absolute;
      inset: -30%;
      background:
        radial-gradient(circle at top, rgba(253, 224, 71, 0.5), transparent 45%),
        radial-gradient(circle at bottom, rgba(248, 250, 252, 0.3), transparent 45%);
      opacity: 0;
      transition: opacity 0.2s ease-out;
      pointer-events: none;
    }

    .quality-card:hover::before {
      opacity: 1;
    }

    .quality-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .quality-title {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .quality-number {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.78rem;
      font-weight: 700;
      background: rgba(15, 23, 42, 0.88);
      color: #facc15;
      border: 1px solid rgba(248, 250, 252, 0.8);
    }

    .quality-header h2 {
      margin: 0;
      font-size: 0.95rem;
    }

    .quality-tag {
      font-size: 0.74rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.86);
      color: #e5e7eb;
      border: 1px solid rgba(248, 250, 252, 0.7);
    }

    label {
      display: block;
      font-size: 0.75rem;
      color: #111827;
      margin-top: 4px;
      margin-bottom: 3px;
      font-weight: 600;
    }

    select,
    textarea,
    input[type="text"] {
      width: 100%;
      border-radius: 9px;
      border: 1px solid rgba(15, 23, 42, 0.8);
      background: rgba(248, 250, 252, 0.96);
      color: #111827;
      padding: 7px 9px;
      font-size: 0.82rem;
      outline: none;
      resize: vertical;
      min-height: 32px;
    }

    select {
      cursor: pointer;
    }

    select:focus,
    textarea:focus,
    input[type="text"]:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.4);
    }

    textarea {
      min-height: 42px;
      max-height: 96px;
    }

    .hint-inline {
      font-size: 0.7rem;
      color: #0f172a;
      margin-top: 2px;
      opacity: 0.9;
    }

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 14px;
      justify-content: space-between;
      align-items: center;
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 8px 14px;
      font-size: 0.82rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition:
        transform 0.1s ease-out,
        box-shadow 0.1s ease-out,
        filter 0.1s ease-out;
      white-space: nowrap;
    }

    button.primary {
      background: linear-gradient(135deg, #22c55e, #facc15);
      color: #052e16;
      font-weight: 700;
      box-shadow:
        0 12px 32px rgba(34, 197, 94, 0.85),
        0 0 25px rgba(250, 204, 21, 0.9);
    }

    button.secondary {
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      color: #eff6ff;
      box-shadow: 0 10px 26px rgba(59, 130, 246, 0.8);
      border: 1px solid rgba(219, 234, 254, 0.9);
    }

    button.ghost {
      background: rgba(15, 23, 42, 0.8);
      color: var(--muted);
      border: 1px dashed rgba(148, 163, 184, 0.9);
    }

    button:hover {
      transform: translateY(-1px);
      filter: brightness(1.07);
    }

    button:active {
      transform: translateY(0);
      box-shadow: none;
      filter: brightness(0.96);
    }

    .status-text {
      font-size: 0.78rem;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent-green);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    .status-text span.label {
      color: var(--accent-green);
      font-weight: 600;
    }

    /* OUTPUT & SAVED */
    .prompt-output-card {
      margin-bottom: 10px;
    }

    .prompt-output-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .prompt-output-header h2 {
      margin: 0;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .prompt-output-header h2 span.icon {
      font-size: 1.05rem;
    }

    /* Coloured preview blocks */
    .prompt-preview {
      border-radius: 12px;
      padding: 8px 8px 6px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.8);
      margin-bottom: 8px;
      max-height: 220px;
      overflow-y: auto;
    }

    .preview-empty {
      font-size: 0.78rem;
      color: var(--muted);
      padding: 6px 4px;
    }

    .preview-block {
      border-radius: 10px;
      padding: 6px 8px;
      margin-bottom: 6px;
      color: #0f172a;
      background: #e5e7eb;
      display: flex;
      flex-direction: column;
      gap: 3px;
      font-size: 0.8rem;
    }

    .preview-header {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      font-size: 0.78rem;
      color: #020617;
    }

    .preview-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      color: #020617;
      font-weight: 700;
    }

    .preview-task .preview-dot {
      background: #4ade80;
    }
    .preview-context .preview-dot {
      background: #38bdf8;
    }
    .preview-persona .preview-dot {
      background: #a855f7;
    }
    .preview-format .preview-dot {
      background: #facc15;
    }
    .preview-tone .preview-dot {
      background: #fb7185;
    }
    .preview-eval .preview-dot {
      background: #22c55e;
    }

    .preview-label {
      opacity: 0.9;
    }

    .preview-text {
      font-size: 0.78rem;
      color: #020617;
      white-space: pre-wrap;
    }

    /* Raw prompt textarea */
    #promptOutput {
      width: 100%;
      margin-top: 6px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: #020617;
      color: #e5e7eb;
      min-height: 120px;
      max-height: 180px;
      font-size: 0.8rem;
      padding: 6px 8px;
      resize: vertical;
    }

    .saved-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
      margin-bottom: 6px;
    }

    .saved-card-header h2 {
      margin: 0;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .saved-card-header h2 span.icon {
      font-size: 0.95rem;
    }

    .saved-list {
      max-height: 320px;
      overflow-y: auto;
      padding-right: 4px;
      margin-top: 4px;
    }

    .saved-item {
      border-radius: 12px;
      border: 1px solid rgba(191, 219, 254, 0.9);
      padding: 7px 8px 7px;
      margin-bottom: 8px;
      background: linear-gradient(
        135deg,
        rgba(30, 64, 175, 0.95),
        rgba(76, 106, 211, 0.98)
      );
      color: #eff6ff;
      box-shadow: 0 12px 30px rgba(30, 64, 175, 0.9);
    }

    .saved-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.76rem;
      margin-bottom: 4px;
    }

    .saved-meta span.name {
      color: #f9a8d4;
      font-weight: 600;
    }

    .saved-textarea {
      width: 100%;
      border-radius: 8px;
      border: 1px solid rgba(219, 234, 254, 0.9);
      background: #020617;
      color: #e5e7eb;
      padding: 5px 6px;
      font-size: 0.76rem;
      resize: vertical;
      min-height: 60px;
    }

    .empty-state {
      font-size: 0.76rem;
      color: var(--muted);
      padding: 10px 0 4px;
    }

    .footer-note {
      margin-top: 16px;
      font-size: 0.72rem;
      color: var(--muted);
      text-align: right;
      padding-top: 8px;
      border-top: 1px solid rgba(191, 219, 254, 0.8);
    }

    .footer-note span {
      color: #38bdf8;
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <div class="top-strip"></div>

    <header class="app-header">
      <div class="title-block">
        <div class="logo-chip">
          <span class="icon">‚öôÔ∏è</span>
          <span class="text">6Q Prompt Builder</span>
        </div>
        <h1>
          Turn rough CA queries into
          <span class="highlight">bright, structured AI prompts</span>
        </h1>
        <p class="subtitle">
          Mix <strong>Task</strong>, <strong>Context</strong>, <strong>Persona</strong>,
          <strong>Format</strong>, <strong>Tone</strong> and <strong>Evaluation</strong> ‚Äì
          and reuse the prompts across tools for
          <span class="highlight">CA-grade outputs</span>.
        </p>
        <div class="badge-row">
          <div class="badge green">
            <span class="dot"></span> Tax Audit ¬∑ GST ¬∑ MCA ¬∑ Advisory
          </div>
          <div class="badge">
            <span class="dot"></span> ChatGPT ¬∑ Claude ¬∑ Perplexity friendly
          </div>
          <div class="badge pink">
            <span class="dot"></span> Build a colourful prompt library
          </div>
        </div>
      </div>

      <div class="header-actions">
        <div class="header-tag">
          <span class="icon">üéØ</span>
          <span>Framework: 6 Qualities of an Effective Prompt</span>
        </div>
        <div class="header-tag">
          <span class="icon">üìö</span>
          <span>Use for: 3CD ¬∑ CARO ¬∑ Ind AS ¬∑ GST notes</span>
        </div>
        <div class="hint">
          Simple flow: pick from dropdowns, personalise where needed, then generate, save, or download.
        </div>
        <div class="step-strip">
          <div class="step-chip">
            <span class="circle">1</span> Select / type inputs
          </div>
          <div class="step-chip">
            <span class="circle">2</span> Click Generate Prompt
          </div>
          <div class="step-chip">
            <span class="circle">3</span> Copy / Save / Download
          </div>
        </div>
      </div>
    </header>

    <div class="main-grid">
      <!-- LEFT SIDE: INPUTS -->
      <section class="card">
        <div class="qualities-grid">
          <!-- 1. CLEAR TASK -->
          <div class="quality-card quality-1">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">1</div>
                <h2>Clear Task</h2>
              </div>
              <div class="quality-tag">What should AI do?</div>
            </div>
            <label for="taskSelect">Choose a ready-made task</label>
            <select id="taskSelect">
              <option value="">‚Äî Select or type your own ‚Äî</option>
              <option>Draft a 3CD note explaining treatment of interest on delayed TDS.</option>
              <option>Prepare a tax audit working paper for Clause 21(b) reporting.</option>
              <option>Draft a GST reconciliation note for 2B vs Books differences.</option>
              <option>Prepare a statutory audit note on related party disclosures.</option>
              <option>Summarise key risks and controls for revenue recognition as per Ind AS.</option>
            </select>
            <span class="hint-inline">Tip: Keep this as one clear, action-oriented sentence.</span>
            <label for="taskCustom">Or type your own task</label>
            <textarea
              id="taskCustom"
              placeholder="e.g., Draft a note for management explaining disallowance u/s 43B(h) for MSME dues..."
            ></textarea>
          </div>

          <!-- 2. CONTEXT -->
          <div class="quality-card quality-2">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">2</div>
                <h2>Context</h2>
              </div>
              <div class="quality-tag">Scenario &amp; numbers</div>
            </div>
            <label for="contextSelect">Choose a typical CA scenario</label>
            <select id="contextSelect">
              <option value="">‚Äî Select or type your own ‚Äî</option>
              <option>Private limited company, FY 2024-25, interest on delayed TDS ‚Çπ12,000.</option>
              <option>Partnership firm, turnover ‚Çπ8.5 crore, audit u/s 44AB applicable.</option>
              <option>GST registered trader, ITC mismatch for FY 2024-25 of ‚Çπ2,15,000.</option>
              <option>Manufacturing company with bank CC limit and quarterly stock statements.</option>
              <option>Company following Ind AS, first-time adoption balance sheet as at 31-03-2025.</option>
            </select>
            <span class="hint-inline">Include entity type, FY, key figures, and special facts.</span>
            <label for="contextCustom">Or type a custom context</label>
            <textarea
              id="contextCustom"
              placeholder="e.g., Proprietorship, GST registered, multiple branches, 2B vs books mismatch mainly due to RCM and ineligible ITC..."
            ></textarea>
          </div>

          <!-- 3. PERSONA -->
          <div class="quality-card quality-3">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">3</div>
                <h2>Persona</h2>
              </div>
              <div class="quality-tag">Who is answering?</div>
            </div>
            <label for="personaSelect">Choose an expert persona</label>
            <select id="personaSelect">
              <option value="">‚Äî Select or type your own ‚Äî</option>
              <option>Act as a practising Chartered Accountant preparing a working paper.</option>
              <option>Act as a statutory auditor drafting notes to accounts.</option>
              <option>Act as a tax audit specialist focusing on Form 3CD clauses.</option>
              <option>Act as a GST consultant preparing a reconciliation report for management.</option>
              <option>Act as an Ind AS advisory expert drafting technical notes.</option>
            </select>
            <span class="hint-inline">Match the persona to who you want AI to ‚Äúbe‚Äù.</span>
            <label for="personaCustom">Or type a custom persona</label>
            <textarea
              id="personaCustom"
              placeholder="e.g., Act as a senior partner in a CA firm guiding an article assistant on documentation..."
            ></textarea>
          </div>

          <!-- 4. FORMAT -->
          <div class="quality-card quality-4">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">4</div>
                <h2>Format</h2>
              </div>
              <div class="quality-tag">How should it look?</div>
            </div>
            <label for="formatSelect">Choose an output format</label>
            <select id="formatSelect">
              <option value="">‚Äî Select or type your own ‚Äî</option>
              <option>3 paragraphs ‚Äî heading, reasoning, and reporting reference.</option>
              <option>Note format with: Objective, Facts, Analysis, Conclusion.</option>
              <option>Tabular format with columns: Particulars, Section, Treatment, Remarks.</option>
              <option>Numbered points suitable for inclusion in Notes to Accounts.</option>
              <option>Working paper format with: Background, Procedures performed, Conclusion.</option>
            </select>
            <span class="hint-inline">Think: where will you paste this? WP, email, note?</span>
            <label for="formatCustom">Or type a custom format</label>
            <textarea
              id="formatCustom"
              placeholder="e.g., First give a concise summary, then detailed reasoning with section references, then final wording for the report..."
            ></textarea>
          </div>

          <!-- 5. TONE -->
          <div class="quality-card quality-5">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">5</div>
                <h2>Tone</h2>
              </div>
              <div class="quality-tag">Style of writing</div>
            </div>
            <label for="toneSelect">Choose tone</label>
            <select id="toneSelect">
              <option value="">‚Äî Select tone ‚Äî</option>
              <option>Use a formal, factual and technically accurate tone suitable for audit documentation.</option>
              <option>Use a clear, explanatory tone as if guiding a junior article assistant.</option>
              <option>Use a concise, board-level tone suitable for management reporting.</option>
              <option>Use an advisory tone highlighting risks, implications and action points.</option>
              <option>Use an exam-oriented tone focusing on conceptual clarity and section references.</option>
            </select>
            <span class="hint-inline">Tone decides whether it reads like a note, mail, or class.</span>
            <label for="toneCustom">Or describe a custom tone</label>
            <textarea
              id="toneCustom"
              placeholder="e.g., Use a balanced tone that is professional yet easy for a non-finance director to understand..."
            ></textarea>
          </div>

          <!-- 6. EVALUATION -->
          <div class="quality-card quality-6">
            <div class="quality-header">
              <div class="quality-title">
                <div class="quality-number">6</div>
                <h2>Evaluation</h2>
              </div>
              <div class="quality-tag">Reviewer‚Äôs check</div>
            </div>
            <label for="evalSelect">Choose a reviewer check</label>
            <select id="evalSelect">
              <option value="">‚Äî Select or type your own ‚Äî</option>
              <option>After drafting, review whether any Clause 21(b) disclosure is required.</option>
              <option>Highlight if any reporting under CARO 2020 is triggered and specify the clause.</option>
              <option>Suggest if any additional note to accounts or management representation is needed.</option>
              <option>Flag key risks or grey areas that require partner-level review.</option>
              <option>Suggest follow-up data or workings required from the client.</option>
            </select>
            <span class="hint-inline">End with a review question so AI double-checks its own work.</span>
            <label for="evalCustom">Or type a custom evaluation instruction</label>
            <textarea
              id="evalCustom"
              placeholder="e.g., End by listing 3 questions the audit partner should ask before finalising the view..."
            ></textarea>
          </div>
        </div>

        <!-- CONTROLS -->
        <div class="controls-row">
          <div class="button-row">
            <button class="primary" id="generateBtn">
              ‚öôÔ∏è Generate Prompt
            </button>
            <button class="secondary" id="clearBtn">
              üßπ Reset All
            </button>
          </div>
          <div class="status-text">
            <div class="status-dot"></div>
            <span>Status:</span>
            <span class="label" id="statusText">Ready</span>
          </div>
        </div>
      </section>

      <!-- RIGHT SIDE: OUTPUT & SAVED PROMPTS -->
      <section class="card">
        <div class="prompt-output-card">
          <div class="prompt-output-header">
            <h2>
              <span class="icon">üìù</span>
              Generated Prompt
            </h2>
            <div class="button-row">
              <button class="secondary" id="copyPromptBtn">üìã Copy</button>
              <button class="secondary" id="savePromptBtn">üíæ Save</button>
              <button class="secondary" id="downloadPromptBtn">
                ‚¨áÔ∏è Download .txt
              </button>
            </div>
          </div>

          <!-- Coloured preview -->
          <div id="promptPreview" class="prompt-preview">
            <div class="preview-empty">
              Generate a prompt to see a colour-coded breakdown of each quality here.
            </div>
          </div>

          <!-- Raw prompt (plain text) -->
          <textarea
            id="promptOutput"
            placeholder="Plain text version of your prompt appears here. It contains only your inputs, separated by blank lines in the same sequence."
          ></textarea>
          <div class="hint">
            The preview above is colour-coded by quality. The plain text here is what gets copied/downloaded.
          </div>
        </div>

        <div class="saved-card-header">
          <h2>
            <span class="icon">üìö</span>
            Saved Prompts (this browser session)
          </h2>
          <button class="ghost" id="clearSavedBtn">üóë Clear all</button>
        </div>
        <div id="savedList" class="saved-list">
          <div class="empty-state">
            No prompts saved yet. Generate a prompt and click
            <strong>üíæ Save</strong> to build your library.
          </div>
        </div>
      </section>
    </div>

    <div class="footer-note">
      Designed for <span>Excel &amp; AI driven CA practice</span> ¬∑ Fully offline, runs in your browser.
    </div>
  </div>

  <script>
    function pickValue(selectId, customId) {
      const selectEl = document.getElementById(selectId);
      const customEl = document.getElementById(customId);

      const custom = customEl ? customEl.value.trim() : "";
      const selected = selectEl ? selectEl.value.trim() : "";

      if (custom) return custom;
      if (selected) return selected;
      return "";
    }

    function setStatus(msg, isError = false) {
      const status = document.getElementById("statusText");
      status.textContent = msg;
      status.style.color = isError ? "#fb7185" : "#4ade80";
    }

    function escapeHtml(str) {
      return str
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }

    function generatePrompt() {
      const task = pickValue("taskSelect", "taskCustom");
      const context = pickValue("contextSelect", "contextCustom");
      const persona = pickValue("personaSelect", "personaCustom");
      const format = pickValue("formatSelect", "formatCustom");
      const tone = pickValue("toneSelect", "toneCustom");
      const evalInstr = pickValue("evalSelect", "evalCustom");

      if (!task) {
        setStatus("Please specify at least a Clear Task.", true);
        return;
      }

      // Build plain text prompt: STRICTLY user input, no added wording
      const textParts = [];
      const sections = [];

      if (persona) {
        textParts.push(persona);
        sections.push({
          key: "persona",
          label: "Persona",
          number: "3",
          cssClass: "preview-persona",
          text: persona
        });
      }

      if (task) {
        textParts.push(task);
        sections.push({
          key: "task",
          label: "Task",
          number: "1",
          cssClass: "preview-task",
          text: task
        });
      }

      if (context) {
        textParts.push(context);
        sections.push({
          key: "context",
          label: "Context",
          number: "2",
          cssClass: "preview-context",
          text: context
        });
      }

      if (format) {
        textParts.push(format);
        sections.push({
          key: "format",
          label: "Format",
          number: "4",
          cssClass: "preview-format",
          text: format
        });
      }

      if (tone) {
        textParts.push(tone);
        sections.push({
          key: "tone",
          label: "Tone",
          number: "5",
          cssClass: "preview-tone",
          text: tone
        });
      }

      if (evalInstr) {
        textParts.push(evalInstr);
        sections.push({
          key: "eval",
          label: "Evaluation",
          number: "6",
          cssClass: "preview-eval",
          text: evalInstr
        });
      }

      const finalPrompt = textParts.join("\n\n");
      const output = document.getElementById("promptOutput");
      output.value = finalPrompt;

      // Build coloured preview
      const preview = document.getElementById("promptPreview");
      preview.innerHTML = "";
      if (!sections.length) {
        const div = document.createElement("div");
        div.className = "preview-empty";
        div.textContent = "No sections to preview. Add inputs and generate the prompt.";
        preview.appendChild(div);
      } else {
        sections.forEach(sec => {
          const block = document.createElement("div");
          block.className = "preview-block " + sec.cssClass;

          const header = document.createElement("div");
          header.className = "preview-header";

          const dot = document.createElement("div");
          dot.className = "preview-dot";
          dot.textContent = sec.number;

          const label = document.createElement("div");
          label.className = "preview-label";
          label.textContent = sec.label;

          header.appendChild(dot);
          header.appendChild(label);

          const textDiv = document.createElement("div");
          textDiv.className = "preview-text";
          textDiv.innerHTML = escapeHtml(sec.text).replace(/\n/g, "<br>");

          block.appendChild(header);
          block.appendChild(textDiv);
          preview.appendChild(block);
        });
      }

      setStatus("Prompt generated.");
    }

    function clearInputs() {
      const selects = document.querySelectorAll("select");
      const textareas = document.querySelectorAll(
        "#taskCustom, #contextCustom, #personaCustom, #formatCustom, #toneCustom, #evalCustom"
      );
      selects.forEach((s) => (s.value = ""));
      textareas.forEach((t) => (t.value = ""));
      document.getElementById("promptOutput").value = "";
      const preview = document.getElementById("promptPreview");
      preview.innerHTML =
        '<div class="preview-empty">Generate a prompt to see a colour-coded breakdown of each quality here.</div>';
      setStatus("Inputs cleared.");
    }

    function copyPrompt() {
      const output = document.getElementById("promptOutput");
      if (!output.value.trim()) {
        setStatus("Nothing to copy. Generate a prompt first.", true);
        return;
      }
      output.select();
      output.setSelectionRange(0, 99999);
      navigator.clipboard
        .writeText(output.value)
        .then(() => setStatus("Prompt copied to clipboard."))
        .catch(() => setStatus("Clipboard not available in this browser.", true));
    }

    // Local in-memory store (per page load)
    const savedPrompts = [];

    function renderSaved() {
      const container = document.getElementById("savedList");
      container.innerHTML = "";
      if (!savedPrompts.length) {
        const div = document.createElement("div");
        div.className = "empty-state";
        div.innerHTML =
          'No prompts saved yet. Generate a prompt and click <strong>üíæ Save</strong> to build your library.';
        container.appendChild(div);
        return;
      }

      savedPrompts.forEach((item, index) => {
        const wrapper = document.createElement("div");
        wrapper.className = "saved-item";

        const meta = document.createElement("div");
        meta.className = "saved-meta";

        const nameSpan = document.createElement("span");
        nameSpan.className = "name";
        nameSpan.textContent = item.name;

        const timeSpan = document.createElement("span");
        timeSpan.textContent = item.timestamp;

        meta.appendChild(nameSpan);
        meta.appendChild(timeSpan);

        const ta = document.createElement("textarea");
        ta.className = "saved-textarea";
        ta.readOnly = true;
        ta.value = item.text;

        const btnRow = document.createElement("div");
        btnRow.className = "button-row";
        btnRow.style.marginTop = "4px";

        const copyBtn = document.createElement("button");
        copyBtn.className = "secondary";
        copyBtn.textContent = "üìã Copy";
        copyBtn.onclick = () => {
          navigator.clipboard
            .writeText(item.text)
            .then(() => setStatus(`Saved prompt ${index + 1} copied.`))
            .catch(() => setStatus("Clipboard not available.", true));
        };

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "ghost";
        deleteBtn.textContent = "‚úñ Remove";
        deleteBtn.onclick = () => {
          savedPrompts.splice(index, 1);
          renderSaved();
          setStatus("Saved prompt removed.");
        };

        btnRow.appendChild(copyBtn);
        btnRow.appendChild(deleteBtn);

        wrapper.appendChild(meta);
        wrapper.appendChild(ta);
        wrapper.appendChild(btnRow);

        container.appendChild(wrapper);
      });
    }

    function savePrompt() {
      const text = document.getElementById("promptOutput").value.trim();
      if (!text) {
        setStatus("Nothing to save. Generate a prompt first.", true);
        return;
      }

      const now = new Date();
      const name = "Prompt " + (savedPrompts.length + 1);
      const timestamp =
        now.toLocaleDateString() + " ¬∑ " + now.toLocaleTimeString().slice(0, 5);

      savedPrompts.unshift({ name, timestamp, text });
      renderSaved();
      setStatus("Prompt saved in this session.");
    }

    function clearSaved() {
      if (!savedPrompts.length) {
        setStatus("No saved prompts to clear.", true);
        return;
      }
      if (!confirm("Clear all saved prompts for this session?")) return;
      savedPrompts.length = 0;
      renderSaved();
      setStatus("All saved prompts cleared.");
    }

    function downloadPrompt() {
      const text = document.getElementById("promptOutput").value.trim();
      if (!text) {
        setStatus("Nothing to download. Generate a prompt first.", true);
        return;
      }
      const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);

      const now = new Date();
      const fname =
        "CA_Prompt_" +
        now.getFullYear().toString() +
        String(now.getMonth() + 1).padStart(2, "0") +
        String(now.getDate()).padStart(2, "0") +
        "_" +
        String(now.getHours()).padStart(2, "0") +
        String(now.getMinutes()).padStart(2, "0") +
        ".txt";

      const a = document.createElement("a");
      a.href = url;
      a.download = fname;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      setStatus("Prompt downloaded as text file.");
    }

    // Wire events
    document.getElementById("generateBtn").addEventListener("click", generatePrompt);
    document.getElementById("clearBtn").addEventListener("click", clearInputs);
    document
      .getElementById("copyPromptBtn")
      .addEventListener("click", copyPrompt);
    document
      .getElementById("savePromptBtn")
      .addEventListener("click", savePrompt);
    document
      .getElementById("clearSavedBtn")
      .addEventListener("click", clearSaved);
    document
      .getElementById("downloadPromptBtn")
      .addEventListener("click", downloadPrompt);

    // Initial render
    renderSaved();
  </script>
</body>
</html>
